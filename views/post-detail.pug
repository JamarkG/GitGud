extends layout.pug
append head
  script(src="/javascripts/post.js" type="module" defer)

block content
  table(class="table table-striped table-hover table-sm")
    thead
      tr
        th UserId
        th Title
        th Text Field
    tbody
      tr
        td=post.userId
        td=post.title
        td=post.textField
  form(action=`/posts/${post.id}` method='post')
    input(type="hidden" value=csrfToken name="_csrf")
    button(class="btn btn-danger" type="submit") Delete
  form(action=`/posts/edit/${post.id}` method='get')
    input(type="hidden" value=csrfToken name="_csrf")
    button(class="btn btn-warning" type="submit") Edit

  if post.Comments
    div(class="comments-container" id=post.id)
      each comment in post.Comments
        .comment-box
          .comment-box-body(id=`comment-${comment.id}`)
            p(class="comment-box-text") #{comment.body}
          if comment.userId === locals.user.id
            button(class="delete-button btn btn-secondary" id=`${comment.id}`) Delete
            button(class="edit-button btn btn-secondary" id=`${comment.id}`) Edit
  input(class="new-comment-box" name=post.id)
  button(class="add-comment") Add Comment
